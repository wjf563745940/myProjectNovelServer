{"version":3,"sources":["webpack:///static/js/10.7ae4081d06ef7e456d34.js","webpack:///./src/views/info/novelList.vue","webpack:///./src/util/pounchDbUtil.js?0982**","webpack:///novelList.vue","webpack:///./src/views/info/novelList.vue?53ca","webpack:///./src/views/info/novelList.vue?df99","webpack:///./src/views/info/novelList.vue?bea9"],"names":["webpackJsonp","205","module","exports","__webpack_require__","Component","221","__webpack_exports__","initDB","dbname","dbnames","db","PouchDB","console","log","addData","data","post","getById","id","get","putData","put","mulPutDatas","keys","datas","prefix","keysflag","Object","prototype","toString","call","iddatas","map","item","idstr","forEach","it","index","_id","bulkDocs","pounchDbUtil","234","defineProperty","value","global","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_axios__","__WEBPACK_IMPORTED_MODULE_1_axios___default","__WEBPACK_IMPORTED_MODULE_2_vuex__","__WEBPACK_IMPORTED_MODULE_3_util_indexedDb__","__WEBPACK_IMPORTED_MODULE_4_util_pounchDbUtil__","name","infoLists","keyPath","myDb","osname","computed","i","getVersion","created","that","this","a","URL_PREFIX","then","response","results","setNovel","catch","err","methods","downloadnovel","$router","push","getNovel","novel","novelId","getDataByIndex","close","currentChapter","downstatue","infoDetail","setDbVersion","245","version","sources","names","mappings","file","sourcesContent","sourceRoot","250","content","locals","255","render","_vm","_h","$createElement","_c","_self","staticClass","_l","attrs","on","click","$event","_v","_s","type","stopPropagation","preventDefault","staticRenderFns"],"mappings":"AAAAA,cAAc,KAERC,IACA,SAAUC,EAAQC,EAASC,GCDjCA,EAAA,IAEA,IAAAC,GAAAD,EAAA,GAEAA,EAAA,KAEAA,EAAA,KAEA,KAEA,KAGAF,GAAAC,QAAAE,EAAAF,SDUMG,IACA,SAAUJ,EAAQK,EAAqBH,GAE7C,YElBC,SAASI,GAAOC,GAEL,GAAIC,GAAQD,GAAc,QACtBE,EAAK,GAAIC,SAAQF,EAErB,OADAG,SAAQC,IAAI,iBACLH,EAEX,QAASI,GAAQJ,EAAGK,GAChB,MAAQL,GAAGM,KAAKD,GAEpB,QAASE,GAAQP,EAAGQ,GAClB,MAAOR,GAAGS,IAAID,GAEhB,QAASE,GAAQV,EAAGQ,EAAGH,GAGnB,MADGA,GAAA,IAAYG,EACRR,EAAGW,IAAIN,GAIlB,QAASO,GAAYZ,EAAGa,EAAKC,EAAMC,GAGnC,GAAIC,IAAS,CAC8B,oBAAvCC,OAAOC,UAAUC,SAASC,KAAKP,KAE/BG,GAAS,EAEZ,IAAIK,GAAUP,EAAMQ,IAAI,SAASC,GAC9B,GAAIC,GAAM,EAUT,OATER,GACCH,EAAKY,QAAQ,SAASC,EAAGC,GACrBH,IAAQT,EAAOA,EAAOY,GAAO,IAAIJ,EAAKG,KAG1CF,GAAOT,GAAc,IAAIQ,EAAKV,GAGlCU,EAAKK,IAAIJ,EACDD,GAGR,OADHrB,SAAQC,IAAIkB,GACFrB,EAAG6B,SAASR,GApD/B,GAAIS,IACDjC,OAAQA,EAECO,QAASA,EACTM,QAAQA,EACRH,QAAQA,EACRK,YAAYA,EAyDhBhB,GAAA,KFyBFmC,IACA,SAAUxC,EAAQK,EAAqBH,GAE7C,YACAwB,QAAOe,eAAepC,EAAqB,cAAgBqC,OAAO,IACtC,SAASC,GAA8B,GAAIC,GAA8D1C,EAAoB,IAChI2C,EAAsE3C,EAAoB4C,EAAEF,GAC5FG,EAAsC7C,EAAoB,IAC1D8C,EAA8C9C,EAAoB4C,EAAEC,GACpEE,EAAqC/C,EAAoB,IACzDgD,EAA+ChD,EAAoB,IACnEiD,EAAkDjD,EAAoB,IAQlEG,GAA6B,SACzD+C,KGhFD,WHiFCtC,KAAM,WACL,OACCuC,aACAC,QG9EH,KH+EGC,QACAC,OG5EH,WAEAC,SAAAZ,OAAA3C,EAAAwD,EAAAT,EAAA,IHgFEU,WG5EF,gBH8ECC,QAAS,WACR,GAGIC,IAHKV,EAAiE,EAAE7C,OGvE9E,SACAwD,KH0EEd,GAA4Ce,EAAE7C,IAAIyB,EAAOqB,WGzE3D,IAAAC,KAAA,SAAAC,GH0EGL,EAAKR,UAAYa,EAASpD,KGxE7BqD,QHyEGN,EAAKO,SAASP,EGxEjBR,aHyEKgB,MAAM,SAAUC,GAClB3D,QAAQC,IGxEX0D,MAGAC,QAAA1B,KHyEE2B,cAAe,SAAuBpC,GACrC0B,KAAKW,QAAQC,KAAK,8BAAgCZ,KAAKT,UAAUjB,GGvEpEnB,KHyEE0D,SAAU,SAAkBvC,GAC3B,GAAIyB,GGvEPC,KHwEOc,EAAQf,EAAKR,UGvEpBjB,GHwEOyC,EAAUD,EGvEjB3D,EHwEGiC,GAA8D,EAAE4B,eAAejB,EAAKN,KAAK9C,GAAIoD,EAAKL,OAAQqB,EAAShB,EAAKP,QAAS,SAAUxC,GACtIA,GACH+C,EAAKN,KAAK9C,GGvEfsE,QHwEKlB,EAAKY,QAAQC,KAAK,6BAA+BG,EAAU,mBAAqB/D,EGvErFkE,kBHyEKJ,EAAMI,eGvEX,EHwEKJ,EAAMK,YGvEX,EHwEK/B,EAA8D,EAAErC,QAAQgD,EAAKN,KAAK9C,GAAIoD,EAAKL,QGvEhGoB,IHwEKf,EAAKN,KAAK9C,GGvEfsE,QHwEKlB,EAAKY,QAAQC,KAAK,6BAA+BG,EGvEtD,yBH2EEK,WAAY,SAAoB9C,GAC/B,GAAIyB,GGpEPC,KHqEOe,EAAUf,KAAKT,UAAUjB,GGpEhCnB,GHqEO2D,EAAQd,KAAKT,UGvDpBjB,EHyDG0B,MAAKP,KAAOJ,EAAiE,EAAE7C,OGxDlF,SHyDG6C,EAAiE,EAAEnC,QAAQ8C,KAAKP,KAAM,QAAUsB,GAASZ,KAAK,SAAUnD,GACvH+C,EAAKY,QAAQC,KAAK,6BAA+BG,EGxDrD,uBHyDMR,MAAM,SAAUvD,GAClBH,QAAQC,IGxDZE,GHyDsB,cAAdA,EAAKsC,OACRwB,EAAMI,eGxDX,EHyDKJ,EAAMK,YGxDX,EHyDK9B,EAAiE,EAAEhC,QAAQ0C,EAAKN,KAAM,QAAUsB,EGxDrGD,GHyDKf,EAAKY,QAAQC,KAAK,6BAA+BG,EGxDtD,0BH4DI3E,EAAoBwD,EAAET,EAAuD,IAC/EmB,SGrDF,WHsDEe,aGnDF,oBHsD6BtD,KAAKxB,EAAqBH,EAAoB,KAIrEkF,IACA,SAAUpF,EAAQC,EAASC,GIvLjCD,EAAAD,EAAAC,QAAAC,EAAA,SAKAD,EAAAyE,MAAA1E,EAAA0D,EAAA,oFAA2G,IAAQ2B,QAAA,EAAAC,SAAA,yDAAAC,SAAAC,SAAA,mEAAAC,KAAA,gBAAAC,gBAAA,sHAAmUC,WAAA,OJgMhbC,IACA,SAAU5F,EAAQC,EAASC,GKnMjC,GAAA2F,GAAA3F,EAAA,IACA,iBAAA2F,SAAA7F,EAAA0D,EAAAmC,EAAA,MACAA,EAAAC,SAAA9F,EAAAC,QAAA4F,EAAAC,OAEA5F,GAAA,gBAAA2F,GAAA,IL4MME,IACA,SAAU/F,EAAQC,GMpNxBD,EAAAC,SAAgB+F,OAAA,WAAmB,GAAAC,GAAAnC,KAAaoC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAE,GAAA,OAAAA,EAAA,OACAE,YAAA,+CACGF,EAAA,MACHE,YAAA,eACGL,EAAAM,GAAAN,EAAA,mBAAAjE,EAAAI,GACH,MAAAgE,GAAA,MACAE,YAAA,yCACKF,EAAA,OACLE,YAAA,OACAE,OACApE,SAEAqE,IACAC,MAAA,SAAAC,GACAV,EAAAf,WAAA9C,OAGKgE,EAAA,OACLE,YAAA,SACKF,EAAA,QAAAH,EAAAW,GAAAX,EAAAY,GAAA7E,EAAAoB,SAAA6C,EAAAW,GAAA,KAAAR,EAAA,UACLI,OACAM,KAAA,SACA1E,SAEAqE,IACAC,MAAA,SAAAC,GACAA,EAAAI,kBACAJ,EAAAK,iBACAf,EAAAzB,cAAApC,OAGK6D,EAAAW,GAAA,mBACFX,EAAAW,GAAA,KAAAR,EAAA,cACHI,OACApD,KAAA,iBAEGgD,EAAA,eACHE,YAAA,sBACG,QACFW","file":"static/js/10.7ae4081d06ef7e456d34.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 205:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(250)\n\nvar Component = __webpack_require__(8)(\n  /* script */\n  __webpack_require__(234),\n  /* template */\n  __webpack_require__(255),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 221:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar pounchDbUtil = {\n    initDB: initDB,\n\n    addData: addData,\n    putData: putData,\n    getById: getById,\n    mulPutDatas: mulPutDatas\n};\nfunction initDB(dbname) {\n    var dbnames = dbname ? dbname : \"novel\";\n    var db = new PouchDB(dbnames);\n    console.log(\"init pounchdb\");\n    return db;\n};\nfunction addData(db, data) {\n    return db.post(data);\n};\nfunction getById(db, id) {\n    return db.get(id);\n}\nfunction putData(db, id, data) {\n    data['_id'] = id;\n    return db.put(data);\n}\nfunction mulPutDatas(db, keys, datas, prefix) {\n\n    var keysflag = false;\n    if (Object.prototype.toString.call(keys) === '[object Array]') {\n\n        keysflag = true;\n    }\n    var iddatas = datas.map(function (item) {\n        var idstr = \"\";\n        if (keysflag) {\n            keys.forEach(function (it, index) {\n                idstr += (prefix ? prefix[index] : '') + item[it];\n            });\n        } else {\n            idstr = (prefix ? prefix : '') + item[keys];\n        }\n        item._id = idstr;\n        return item;\n    });\n    console.log(iddatas);\n    return db.bulkDocs(iddatas);\n}\n\nfunction updateData(db, id, data) {\n    db.get(id).then(function (doc) {\n        return db.put(data);\n    }).catch(function (err) {\n        console.log(err);\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (pounchDbUtil);\n\n/***/ }),\n\n/***/ 234:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_util_indexedDb__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_util_pounchDbUtil__ = __webpack_require__(221);\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n\tname: 'ruleList',\n\tdata: function data() {\n\t\treturn {\n\t\t\tinfoLists: [],\n\t\t\tkeyPath: \"id\",\n\t\t\tmyDb: {},\n\t\t\tosname: \"novels\"\n\n\t\t};\n\t},\n\n\tcomputed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"b\" /* mapGetters */])({\n\t\t\"getVersion\": \"getVersion\"\n\t})),\n\tcreated: function created() {\n\t\tvar db = __WEBPACK_IMPORTED_MODULE_4_util_pounchDbUtil__[\"a\" /* default */].initDB(\"novel\");\n\n\n\t\tvar that = this;\n\t\t__WEBPACK_IMPORTED_MODULE_1_axios___default.a.get(global.URL_PREFIX + '').then(function (response) {\n\t\t\tthat.infoLists = response.data.results;\n\t\t\tthat.setNovel(that.infoLists);\n\t\t}).catch(function (err) {\n\t\t\tconsole.log(err);\n\t\t});\n\t},\n\tmethods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n\t\tdownloadnovel: function downloadnovel(index) {\n\t\t\tthis.$router.push(\"/novelMenuDownload?novelId=\" + this.infoLists[index].id);\n\t\t},\n\t\tgetNovel: function getNovel(index) {\n\t\t\tvar that = this;\n\t\t\tvar novel = that.infoLists[index];\n\t\t\tvar novelId = novel.id;\n\t\t\t__WEBPACK_IMPORTED_MODULE_3_util_indexedDb__[\"a\" /* default */].getDataByIndex(that.myDb.db, that.osname, novelId, that.keyPath, function (data) {\n\t\t\t\tif (data) {\n\t\t\t\t\tthat.myDb.db.close();\n\t\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\" + novelId + \"&novelChapterId=\" + data.currentChapter);\n\t\t\t\t} else {\n\t\t\t\t\tnovel.currentChapter = 1;\n\t\t\t\t\tnovel.downstatue = false;\n\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_3_util_indexedDb__[\"a\" /* default */].addData(that.myDb.db, that.osname, [novel]);\n\t\t\t\t\tthat.myDb.db.close();\n\t\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\" + novelId + \"&novelChapterId=1\");\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tinfoDetail: function infoDetail(index) {\n\t\t\tvar that = this;\n\t\t\tvar novelId = this.infoLists[index].id;\n\t\t\tvar novel = this.infoLists[index];\n\n\t\t\tthis.myDb = __WEBPACK_IMPORTED_MODULE_4_util_pounchDbUtil__[\"a\" /* default */].initDB(\"novel\");\n\t\t\t__WEBPACK_IMPORTED_MODULE_4_util_pounchDbUtil__[\"a\" /* default */].getById(this.myDb, \"novel\" + novelId).then(function (data) {\n\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\" + novelId + \"&novelChapterId=1\");\n\t\t\t}).catch(function (data) {\n\t\t\t\tconsole.log(data);\n\t\t\t\tif (data.name === \"not_found\") {\n\t\t\t\t\tnovel.currentChapter = 1;\n\t\t\t\t\tnovel.downstatue = false;\n\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_4_util_pounchDbUtil__[\"a\" /* default */].putData(that.myDb, \"novel\" + novelId, novel);\n\t\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\" + novelId + \"&novelChapterId=1\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"c\" /* mapActions */])({\n\t\t\"setNovel\": \"setNovel\",\n\t\t\"setDbVersion\": \"setDbVersion\"\n\t}))\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(5)))\n\n/***/ }),\n\n/***/ 245:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(203)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".desc button{float:right;border:1px;background:#26a2ff;color:#fff;padding:6 12px}\", \"\", {\"version\":3,\"sources\":[\"G:/work/my-project-novel/src/views/info/novelList.vue\"],\"names\":[],\"mappings\":\"AACA,aACC,YAAa,AACb,WAAY,AACZ,mBAAoB,AACpB,WAAY,AACZ,cAAgB,CAChB\",\"file\":\"novelList.vue\",\"sourcesContent\":[\"\\n.desc  button{\\n\\tfloat: right;\\n\\tborder: 1px;\\n\\tbackground: #26a2ff;\\n\\tcolor: #fff;\\n\\tpadding: 6 12px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 250:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(245);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(204)(\"1a5ce13a\", content, true);\n\n/***/ }),\n\n/***/ 255:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"_full_inner _scroll _effect component-chat\"\n  }, [_c('ul', {\n    staticClass: \"wechat-list\"\n  }, _vm._l((_vm.infoLists), function(item, index) {\n    return _c('li', {\n      staticClass: \"item _line-fine chat-item-transition\"\n    }, [_c('div', {\n      staticClass: \"info\",\n      attrs: {\n        \"index\": index\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.infoDetail(index)\n        }\n      }\n    }, [_c('div', {\n      staticClass: \"desc\"\n    }, [_c('span', [_vm._v(_vm._s(item.name))]), _vm._v(\" \"), _c('button', {\n      attrs: {\n        \"type\": \"button\",\n        \"index\": index\n      },\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.downloadnovel(index)\n        }\n      }\n    }, [_vm._v(\"下载\")])])])])\n  }))]), _vm._v(\" \"), _c('transition', {\n    attrs: {\n      \"name\": \"slide-right\"\n    }\n  }, [_c('router-view', {\n    staticClass: \"cover-transition\"\n  })], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/10.7ae4081d06ef7e456d34.js","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-07c72aaf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./novelList.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./novelList.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-07c72aaf\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./novelList.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/info/novelList.vue\n// module id = 205\n// module chunks = 10","var pounchDbUtil={\r\n\t\t\tinitDB: initDB,\r\n           // getAllBirthdays: getAllBirthdays,\r\n            addData: addData,\r\n            putData:putData,\r\n            getById:getById,\r\n            mulPutDatas:mulPutDatas\r\n           // updateBirthday: updateBirthday,\r\n          //  deleteBirthday: deleteBirthday\r\n}\r\n function initDB(dbname) {\r\n            // Creates the database or opens if it already exists\r\n            var dbnames=dbname?dbname:\"novel\";\r\n            var db = new PouchDB(dbnames);\r\n            console.log(\"init pounchdb\")\r\n            return db;\r\n        };\r\n        function addData(db,data) {\r\n            return  db.post(data);\r\n        };\r\n        function getById(db,id){\r\n          return db.get(id);\r\n        }\r\n        function putData(db,id,data){\r\n          //  if(data){\r\n               data['_id']=id;\r\n            return db.put(data); \r\n           // }\r\n            \r\n        }\r\n        function mulPutDatas(db,keys,datas,prefix){\r\n           // data['_id']=prefix?prefix:''+datas[key];\r\n           \r\n        var keysflag=false;\r\n        if( Object.prototype.toString.call(keys)==='[object Array]'){\r\n            \r\n            keysflag=true;\r\n        }\r\n         var iddatas=  datas.map(function(item){\r\n            var idstr=\"\";\r\n            if(keysflag){\r\n                keys.forEach(function(it,index){\r\n                    idstr+=(prefix?prefix[index]:'')+item[it]\r\n                 })\r\n            }else{\r\n                idstr=(prefix?prefix:'')+item[keys];\r\n                \r\n            }\r\n            item._id=idstr;\r\n             return item\r\n        })\r\n         console.log(iddatas)\r\n            return db.bulkDocs(iddatas); \r\n        }\r\n        \r\n        function updateData(db,id,data ){\r\n            db.get(id).then(function(doc) {\r\n             return db.put(data);\r\n            }).catch(function (err) {\r\n              console.log(err);\r\n            });\r\n        }\r\n\r\n        export default pounchDbUtil\n\n\n// WEBPACK FOOTER //\n// ./src/util/pounchDbUtil.js","\t<template>\r\n\t<div>\r\n\t\t<div class=\"_full_inner _scroll _effect component-chat\" >\r\n\t\t<ul class=\"wechat-list\">\r\n\t\t\t<li class=\"item _line-fine chat-item-transition\" v-for=\"(item ,index) in infoLists\">\r\n\t\t\t\t<div v-bind:index=\"index\" class=\"info\" v-on:click=\"infoDetail(index)\">\r\n\t\t\t\t<div class=\"desc\">\r\n\t\t\t\t\t<span>{{item.name}}</span>\r\n\t\t\t\t\t<button type=\"button\" v-bind:index=\"index\"  @click.stop.prevent=\"downloadnovel(index)\">下载</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t\t\r\n\t\t</div>\r\n\t\t<!-- children router-->\r\n\t\t <transition name=\"slide-right\">\r\n\t\t<router-view class=\"cover-transition\"></router-view>\r\n\t\t</transition>\r\n    </div>\r\n\t</template>\r\n\t<script>\r\n\timport axios from 'axios'\r\n\timport {mapGetters,mapActions} from 'vuex'\r\n\timport indexedDb from 'util/indexedDb'\r\n\timport pounchDbUtil from 'util/pounchDbUtil'\r\n\texport default{\r\n\tname:'ruleList',\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tinfoLists:[\r\n\t\t\t//{name:'锻炼',\"totalMomeny\":\"1000\"},{name:'锻炼',\"totalMomeny\":\"1000\"}\r\n\t\t\t],\r\n\t\t\tkeyPath:\"id\",\r\n\t\t\tmyDb:{},\r\n\t\t\tosname:\"novels\"\r\n\r\n\t\t}\r\n\t},\r\n\tcomputed:{\r\n\t\t...mapGetters({\r\n\t\t\t\t  \"getVersion\":\"getVersion\",\r\n\t\t\t\t  })\r\n\t},\r\n\t created:function(){\r\n\t \tvar db=pounchDbUtil.initDB(\"novel\");\r\n\t \t// pounchDbUtil.addData(db,{\"name\":\"wu\"}).then(function(data){\r\n\t \t// \t\tconsole.log(data)\r\n\t \t// }).catch(function(data){\r\n\t\t\t// console.log(data)\r\n\t \t// })\r\n\t \r\n      let that=this;\r\n axios.get(global.URL_PREFIX+'')\r\n  .then(function (response) {\r\n  that.infoLists=response.data.results\r\n  that.setNovel(that.infoLists)\r\n  }).catch(function(err){\r\n        console.log(err);\r\n    })\r\n    },\r\n\tmethods:{\r\n\t\tdownloadnovel:function(index){\r\n\t\t\t    \tthis.$router.push(\"/novelMenuDownload?novelId=\"+this.infoLists[index].id);\r\n\t\t\t    \t\r\n\t\t},\r\n\t\tgetNovel:function(index){\r\n\t\t\tlet that=this;\r\n\t\t\tlet novel=that.infoLists[index];\r\n\t\t\tlet novelId=novel.id;\r\n\t\t\tindexedDb.getDataByIndex(that.myDb.db,that.osname,novelId,that.keyPath,function(data){\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tthat.myDb.db.close();\r\n\t\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\"+novelId+\"&novelChapterId=\"+data.currentChapter);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tnovel.currentChapter=1;\r\n\t\t\t\t\tnovel.downstatue=false;\r\n\t\t\t\t\t  indexedDb.addData(that.myDb.db,that.osname,[novel]);\r\n\t\t\t\t\t  that.myDb.db.close();\r\n\t\t\t\t\t  that.$router.push(\"/novelList/detail?novelId=\"+novelId+\"&novelChapterId=1\");\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t})\r\n\r\n\r\n\t\t},\r\n\t\tinfoDetail:function(index){\r\n\t\t\tlet that = this;\r\n\t\t\t\t\t\tlet novelId=this.infoLists[index].id;\r\n\t\t\t\t\t\tlet novel=this.infoLists[index]\r\n  \t\t\t\t\t\t// indexedDb.initDb(\"novel\",that.getVersion+1,function(v){//opensuccess里嵌套open不行\r\n  \t\t\t\t\t\t// \t  that.setDbVersion(v);\r\n  \t\t\t\t\t\t// \tvar request=indexedDb.openDb(\"novel\",that.osname,that.getVersion+1,that.keyPath,that.myDb,function(){\r\n\t\t\t\t\t   //     \t\t\tthat.getNovel(index);\r\n\t\t\t\t\t\t\t\t// \tthat.setDbVersion(that.getVersion+1); \r\n\t\t   \r\n\t\t\t\t\t   //     });//打开本地数据库//让ob跟书id绑定\r\n\t\t\t\t\t      \t \r\n\r\n  \t\t\t\t\t\t// },function(){\r\n  \t\t\t\t\t\t// \tthat.getNovel(index);\r\n  \t\t\t\t\t\t// \tthat.setDbVersion(that.getVersion+1); \r\n  \t\t\t\t\t\t// },that.osname,that.keyPath,that.myDb)\t\r\n  \t\t\t\t\t\t this.myDb=pounchDbUtil.initDB(\"novel\");\r\n  \t\t\t\t\t\tpounchDbUtil.getById(this.myDb,\"novel\"+novelId).then(function(data){\r\n  \t\t\t\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\"+novelId+\"&novelChapterId=1\");\r\n  \t\t\t\t\t\t}).catch(function(data){\r\n  \t\t\t\t\t\t\tconsole.log(data)\r\n  \t\t\t\t\t\t\tif(data.name===\"not_found\"){\r\n  \t\t\t\t\t\t\t\tnovel.currentChapter=1;\r\n\t\t\t\t\t\t\t\tnovel.downstatue=false;\r\n  \t\t\t\t\t\t\t\tpounchDbUtil.putData(that.myDb,\"novel\"+novelId,novel);\r\n  \t\t\t\t\t\t\t\tthat.$router.push(\"/novelList/detail?novelId=\"+novelId+\"&novelChapterId=1\");\r\n  \t\t\t\t\t\t\t}\r\n  \t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\r\n\t\t},\r\n\t\t...mapActions({\r\n\t\t\t\t\"setNovel\":\"setNovel\",\r\n\t\t\t\t   \"setDbVersion\":\"setDbVersion\"\r\n\t\t\t})\r\n\t}\r\n}\r\n\t</script>\r\n\t<style scope>\r\n\t.desc  button{\r\n\t\tfloat: right;\r\n\t\tborder: 1px;\r\n\t\tbackground: #26a2ff;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 6 12px;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// novelList.vue?0a3e7ebb","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".desc button{float:right;border:1px;background:#26a2ff;color:#fff;padding:6 12px}\", \"\", {\"version\":3,\"sources\":[\"G:/work/my-project-novel/src/views/info/novelList.vue\"],\"names\":[],\"mappings\":\"AACA,aACC,YAAa,AACb,WAAY,AACZ,mBAAoB,AACpB,WAAY,AACZ,cAAgB,CAChB\",\"file\":\"novelList.vue\",\"sourcesContent\":[\"\\n.desc  button{\\n\\tfloat: right;\\n\\tborder: 1px;\\n\\tbackground: #26a2ff;\\n\\tcolor: #fff;\\n\\tpadding: 6 12px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-07c72aaf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/info/novelList.vue\n// module id = 245\n// module chunks = 10","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-07c72aaf\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./novelList.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"1a5ce13a\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-07c72aaf\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/info/novelList.vue\n// module id = 250\n// module chunks = 10","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"_full_inner _scroll _effect component-chat\"\n  }, [_c('ul', {\n    staticClass: \"wechat-list\"\n  }, _vm._l((_vm.infoLists), function(item, index) {\n    return _c('li', {\n      staticClass: \"item _line-fine chat-item-transition\"\n    }, [_c('div', {\n      staticClass: \"info\",\n      attrs: {\n        \"index\": index\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.infoDetail(index)\n        }\n      }\n    }, [_c('div', {\n      staticClass: \"desc\"\n    }, [_c('span', [_vm._v(_vm._s(item.name))]), _vm._v(\" \"), _c('button', {\n      attrs: {\n        \"type\": \"button\",\n        \"index\": index\n      },\n      on: {\n        \"click\": function($event) {\n          $event.stopPropagation();\n          $event.preventDefault();\n          _vm.downloadnovel(index)\n        }\n      }\n    }, [_vm._v(\"下载\")])])])])\n  }))]), _vm._v(\" \"), _c('transition', {\n    attrs: {\n      \"name\": \"slide-right\"\n    }\n  }, [_c('router-view', {\n    staticClass: \"cover-transition\"\n  })], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-07c72aaf\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/info/novelList.vue\n// module id = 255\n// module chunks = 10"],"sourceRoot":""}